<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DocRouter MCP Server</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Add Prism.js for code highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>DocRouter MCP Server</h1>
            <p class="subtitle">Model Context Protocol Implementation for docrouter.ai</p>
            <nav>
                <ul>
                    <li><a href="#overview">Overview</a></li>
                    <li><a href="#features">Features</a></li>
                    <li><a href="#architecture">Architecture</a></li>
                    <li><a href="#installation">Installation</a></li>
                    <li><a href="#usage">Usage</a></li>
                    <li><a href="#interfaces">Interfaces</a></li>
                    <li><a href="#github">GitHub</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container">
        <section id="overview">
            <h2>Overview</h2>
            <p>
                The DocRouter MCP Server is an implementation of Anthropic's Model Context Protocol (MCP) for docrouter.ai. 
                It enables Claude and other MCP clients to securely access and interact with docrouter.ai workspaces, 
                providing standardized interfaces for documents, prompts, extraction schemas, and extraction results.
            </p>
            <p>
                MCP is an open protocol that standardizes how applications provide context to LLMs. Think of MCP like a USB-C port for AI applications. 
                Just as USB-C provides a standardized way to connect your devices to various peripherals and accessories, 
                MCP provides a standardized way to connect AI models to different data sources and tools.
            </p>
        </section>

        <section id="features">
            <h2>Features</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <h3>Authentication</h3>
                    <p>Uses docrouter.ai's existing user token-based authentication system to ensure secure access</p>
                </div>
                <div class="feature-card">
                    <h3>Workspace Exposure</h3>
                    <p>Exposes a single workspace (organization) based on the authenticated user's token</p>
                </div>
                <div class="feature-card">
                    <h3>Document Management</h3>
                    <p>Interfaces to list, view, upload, and delete documents in the workspace</p>
                </div>
                <div class="feature-card">
                    <h3>Prompts Access</h3>
                    <p>Interfaces to list and view prompts and their configurations</p>
                </div>
                <div class="feature-card">
                    <h3>Extraction Schemas</h3>
                    <p>Interfaces to list and view extraction schemas and their configurations</p>
                </div>
                <div class="feature-card">
                    <h3>Extraction Results</h3>
                    <p>Interfaces to list and view extraction results for documents</p>
                </div>
            </div>
        </section>

        <section id="architecture">
            <h2>Architecture</h2>
            <p>
                The MCP server is implemented as a separate directory and process from the main docrouter.ai application.
                This separation provides several benefits:
            </p>
            <ul>
                <li><strong>Isolation:</strong> The MCP server can run independently, reducing the risk of affecting the main application.</li>
                <li><strong>Scalability:</strong> The MCP server can be scaled separately from the main application.</li>
                <li><strong>Deployment Flexibility:</strong> The MCP server can be deployed on the same or different machines as the main application.</li>
                <li><strong>Development Independence:</strong> Changes to the MCP server can be made without affecting the main application.</li>
            </ul>
            
            <div class="architecture-diagram">
                <img src="architecture.svg" alt="MCP Server Architecture Diagram">
            </div>
            
            <h3>Directory Structure</h3>
            <pre><code class="language-bash">mcp_server/
├── __init__.py          # Package initialization
├── main.py              # Main server implementation
├── auth.py              # Authentication logic
├── install.py           # Installation script
├── resources/           # Resource definitions
│   ├── __init__.py
│   ├── documents.py     # Document resources
│   ├── prompts.py       # Prompt resources
│   ├── schemas.py       # Schema resources
│   └── results.py       # Result resources
├── tools/               # Tool definitions
│   ├── __init__.py
│   ├── documents.py     # Document management tools
│   └── extraction.py    # Extraction tools
└── tests/               # Tests
    ├── __init__.py
    └── test_server.py   # Server test script</code></pre>
        </section>

        <section id="installation">
            <h2>Installation</h2>
            <p>To install the MCP server, follow these steps:</p>
            
            <h3>1. Clone the repository</h3>
            <pre><code class="language-bash">git clone https://github.com/analytiq-hub/doc-router.git
cd doc-router</code></pre>
            
            <h3>2. Install the MCP Python SDK</h3>
            <pre><code class="language-bash">pip install "mcp[cli]"</code></pre>
            
            <h3>3. Alternatively, use the installation script</h3>
            <pre><code class="language-bash">python mcp_server/install.py</code></pre>
        </section>

        <section id="usage">
            <h2>Usage</h2>
            
            <h3>Running the Server</h3>
            <p>You can run the MCP server using the MCP CLI:</p>
            <pre><code class="language-bash"># Development mode
mcp dev mcp_server/main.py

# Production mode
mcp serve mcp_server/main.py</code></pre>
            
            <h3>Testing the Server</h3>
            <p>To test the server functionality:</p>
            <pre><code class="language-bash">python -m mcp_server.tests.test_server</code></pre>
            <p>Note: You'll need to replace the <code>TEST_TOKEN</code> in the test script with a valid user token.</p>
            
            <h3>Integration with Claude</h3>
            <p>To use this MCP server with Claude Desktop:</p>
            <ol>
                <li>Run the MCP server</li>
                <li>In Claude Desktop, go to Settings > Model Context Protocol</li>
                <li>Add a new server with the appropriate connection details</li>
                <li>Claude will now be able to access your docrouter.ai workspace through the MCP server</li>
            </ol>
        </section>

        <section id="interfaces">
            <h2>Interfaces</h2>
            
            <h3>Resource Interfaces</h3>
            <p>The MCP server exposes the following resource interfaces:</p>
            
            <h4>Documents</h4>
            <ul>
                <li><code>documents://list</code> - List all documents in the workspace</li>
                <li><code>documents://{document_id}</code> - Get a specific document by ID</li>
                <li><code>documents://{document_id}/content</code> - Get the content of a specific document</li>
            </ul>
            
            <h4>Prompts</h4>
            <ul>
                <li><code>prompts://list</code> - List all prompts in the workspace</li>
                <li><code>prompts://{prompt_id}</code> - Get a specific prompt by ID</li>
                <li><code>prompts://{prompt_id}/config</code> - Get the configuration of a specific prompt</li>
            </ul>
            
            <h4>Extraction Schemas</h4>
            <ul>
                <li><code>schemas://list</code> - List all extraction schemas in the workspace</li>
                <li><code>schemas://{schema_id}</code> - Get a specific schema by ID</li>
                <li><code>schemas://{schema_id}/config</code> - Get the configuration of a specific schema</li>
            </ul>
            
            <h4>Extraction Results</h4>
            <ul>
                <li><code>results://list</code> - List all extraction results in the workspace</li>
                <li><code>results://{document_id}</code> - Get extraction results for a specific document</li>
                <li><code>results://{document_id}/{schema_id}</code> - Get extraction results for a specific document and schema</li>
            </ul>
            
            <h3>Tool Interfaces</h3>
            <p>The MCP server exposes the following tool interfaces:</p>
            
            <h4>Document Management</h4>
            <ul>
                <li><code>upload_document(name: str, content: str)</code> - Upload a new document</li>
                <li><code>delete_document(document_id: str)</code> - Delete a document</li>
            </ul>
            
            <h4>Extraction</h4>
            <ul>
                <li><code>extract_document(document_id: str, schema_id: str)</code> - Extract data from a document using a specific schema</li>
                <li><code>update_extraction(document_id: str, schema_id: str, data: dict)</code> - Update extraction results</li>
            </ul>
        </section>

        <section id="github">
            <h2>GitHub Repository</h2>
            <p>
                The DocRouter MCP Server is part of the docrouter.ai open source project.
                You can find the source code on GitHub:
            </p>
            <div class="github-link">
                <a href="https://github.com/analytiq-hub/doc-router" target="_blank" class="button">View on GitHub</a>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 DocRouter MCP Server. Part of the <a href="https://github.com/analytiq-hub/doc-router">docrouter.ai</a> project.</p>
        </div>
    </footer>

    <!-- Add Prism.js for code highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html>
